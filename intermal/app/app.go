package app

import (
	"bot-oleg/intermal/config"
	"context"
	"fmt"
	"github.com/tkcrm/mx/logger"
	"gopkg.in/telebot.v4"
	"log"
	"time"
)

type Question struct {
	Category   string
	Difficulty string
	Text       string
	VideoNote  string
	Photos     []string
}

// –ú–∞—Å—Å–∏–≤ –≤–æ–ø—Ä–æ—Å–æ–≤
var questions = []Question{
	{Category: "–ö–∏–ö–∏", Difficulty: "Easy", Text: "–í–æ–∑—Ä–∞—Å—Ç –•—Ä–∏—Å—Ç–∞: \n\n–¢–µ–ø–µ—Ä—å —Ç–µ–±–µ 33 –≥–æ–¥–∞. –ü–æ–∑–¥—Ä–∞–≤–ª—è—é!\n–¢–∞–∫ –∫–∞–∫ 33 —ç—Ç–æ –≤–æ–∑—Ä–∞—Å—Ç –≤ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞—Å–ø—è–ª–∏ –•—Ä–∏—Å—Ç–∞, —Ç–æ –≤—Å–ø–æ–º–Ω–∏ 5 —Ñ–∞–∫—Ç–æ–≤ –æ —Å–µ–±–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ç–∞–∫ –∂–µ –º–æ–∂–Ω–æ –æ—Ç–Ω–µ—Å—Ç–∏ –∫ –ò–∏—Å—É—Å—É.\n–û–ø–∏—à–∏ —ç—Ç–∏ —Ñ–∞–∫—Ç—ã –∏ –æ—Ç–ø—Ä–∞–≤—å –∏—Ö –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –∏–ª–∏ –∫—Ä—É–∂–æ—á–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –≤ —á–∞—Ç –ü–æ—à—Ç–∞–ú–∏—à—Ç–∞. 100 –±–∞–ª–ª–æ–≤ —Ç–≤–æ–∏!", VideoNote: "./assets/kiki_1.MP4"},
	{Category: "–ö–∏–ö–∏", Difficulty: "Medium", Text: "–ò—Å—Ö–æ–¥ –∏–∑ –ï–≥–∏–ø—Ç–∞:\n\n–¢–µ–ø–µ—Ä—å —Ç–µ–±–µ 33 –≥–æ–¥–∞. –ü–æ–∑–¥—Ä–∞–≤–ª—è—é!\n–¢–∞–∫ –∫–∞–∫ 33 ‚Äì —ç—Ç–æ –≤–æ–∑—Ä–∞—Å—Ç –•—Ä–∏—Å—Ç–∞, –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Ç–µ–±–µ –ø—Ä–æ–ª–æ–∂–∏—Ç—å –≤ –¥–æ–º–µ \"\"–ø—É—Ç—å —á–µ—Ä–µ–∑ –ö—Ä–∞—Å–Ω–æ–µ –º–æ—Ä–µ\"\". –î–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª–æ–∂–∏ –æ–¥–µ–∂–¥—É –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã –Ω–∞ –ø–æ–ª –≤ —Ñ–æ—Ä–º–µ –≤–æ–ª–Ω—ã –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –ø—Ä–æ–≤–æ–¥–∏—à—å —Å–≤–æ–∏—Ö –¥—Ä—É–∑–µ–π –º–µ–∂–¥—É –Ω–∏–º–∏. –°–Ω–∏–º–∏ —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ –∏ –æ—Ç–ø—Ä–∞–≤—å –µ–≥–æ –≤ —á–∞—Ç –ü–æ—à—Ç–∞–ú–∏—à—Ç–∞. –£—Ä–∞, 300 –±–∞–ª–ª–æ–≤ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω—ã!", VideoNote: "./assets/kiki_2.MP4"},
	{Category: "–ö–∏–ö–∏", Difficulty: "Hard", Text: "–ü–æ—Å–µ—Ç–∏ –º–µ—Å—Ç–æ –¥–ª—è –º–µ–¥–∏—Ç–∞—Ü–∏–∏:\n\n–ù–∞–π–¥–∏ –≤ —Å–≤–æ–µ–º –≥–æ—Ä–æ–¥–µ —Ç–∏—Ö–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –º–æ–ª–∏—Ç–≤—ã –∏–ª–∏ –º–µ–¥–∏—Ç–∞—Ü–∏–∏ (—Ü–µ—Ä–∫–æ–≤—å, –ø–∞—Ä–∫, —Ö–æ–ª–º) –∏ –ø—Ä–æ–≤–µ–¥–∏ —Ç–∞–º 15-20 –º–∏–Ω—É—Ç –≤ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è—Ö –æ –ø–æ—Å–ª–µ–¥–µ–º –≥–æ–¥–µ —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏. –°–¥–µ–ª–∞–π –∑–∞–º–µ—Ç–∫–∏ –æ —Å–≤–æ–∏—Ö –æ—â—É—â–µ–Ω–∏—è—Ö. 500 –±–∞–ª–ª–æ–≤ —É —Ç–µ–±—è –≤ –∫–∞—Ä–º–∞–Ω–µ!", VideoNote: "./assets/kiki_1.MP4"},
	{Category: "–°—Ç–∏–∫–∏", Difficulty: "Easy", Text: "–¢–µ–ø–µ—Ä—å –º—ã –ø–æ–∏–≥—Ä–∞–µ–º —Å —Ç–æ–±–æ–π –≤ –≥–µ–æ–≥–µ—Å—Å–µ—Ä, —Ç–µ–±–µ –Ω—É–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ –≥–¥–µ –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–¥–µ–ª–∞–Ω—ã —ç—Ç–∏ —Ñ–æ—Ç–æ, –∫–∞—Ä—Ç—É –¥–ª—è –æ—Ç–º–µ—Ç–æ–∫ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —É –ê–Ω–∏", Photos: []string{"./assets/stick_1.jpg", "./assets/stick_2.jpg", "./assets/stick_3.jpg", "./assets/stick_4.jpg", "./assets/stick_5.jpg"}},
	{Category: "–°—Ç–∏–∫–∏", Difficulty: "Medium", Text: "–ì–µ–æ–≥–µ—Å—Å–µ—Ä –≤—Ç–æ—Ä–æ–π —Ç—É—Ä, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ–∏ three hundred bucks —Ç–µ–±–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç–∞–∫–∂–µ –æ—Ç–º–µ—Ç–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏", Photos: []string{"./assets/stick_6.jpg", "./assets/stick_7.jpg", "./assets/stick_8.jpg", "./assets/stick_9.jpg", "./assets/stick_10.jpg"}},
	{Category: "–°—Ç–∏–∫–∏", Difficulty: "Hard", Text: "–ì–µ–æ–≥–µ—Å—Å–µ—Ä —Ñ–∏–Ω–∞–ª, –≤–æ–æ–±—â–µ –∑–∞ —ç—Ç–æ—Ç —Ä–∞—É–Ω–¥ —Å—á–∏—Ç–∞—é —á—Ç–æ –¥–æ–ª–∂–Ω—ã –¥–∞–≤–∞—Ç—å –±–æ–ª—å—à–µ 500 –æ—á–∫–æ–≤, –Ω–æ —É–≤—ã. –¢–µ–±–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–º–µ—Ç–∏—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ –≥–¥–µ –ø–µ—Ä–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ —Ç—ã –º–æ–≥ –≤–∏–¥–µ—Ç—å –≥–æ–ª–æ–≤–æ–≥–æ –ö–∏—Ä–∏–ª–ª–∞"},
	{Category: "–¢–µ–Ω", Difficulty: "Easy", Text: "–í–Ω–∏–º–∞–Ω–∏–µ! –í–Ω–∏–º–∞–Ω–∏–µ! –û–±—ä—è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω–∫—É—Ä—Å —á—Ç–µ—Ü–æ–≤ –∏–º–µ–Ω–∏ –ê—Ç–∞—Ç—é—Ä–∫–∞! \n\n–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∞–ª–ª—ã, —Ç–µ–±–µ –Ω—É–∂–Ω–æ —Å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –ø–æ—ç—Ç–∞. –†–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–µ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –ø–æ–ø—Ä–æ—Å–∏ —É –ê–Ω–∏. –í–∏–¥–µ–æ–∑–∞–ø–∏—Å—å –ø—Ä–æ—á—Ç–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —á–∞—Ç PandaBanda. –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ —á–ª–µ–Ω—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –∂—é—Ä–∏ –ø—Ä–∏—Å—É–¥—è—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤, —Å–æ–æ—Ç–≤–µ—Å—Ç–≤—É—é—â–µ–µ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ—á—Ç–µ–Ω–∏—è"},
	{Category: "–¢–µ–Ω", Difficulty: "Medium", Text: "–í–Ω–∏–º–∞–Ω–∏–µ! –í–Ω–∏–º–∞–Ω–∏–µ! –û–±—ä—è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω–∫—É—Ä—Å —á—Ç–µ—Ü–æ–≤ –∏–º–µ–Ω–∏ –ê—Ç–∞—Ç—é—Ä–∫–∞! \n\n–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∞–ª–ª—ã, —Ç–µ–±–µ –Ω—É–∂–Ω–æ —Å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –ø–æ—ç—Ç–∞. –†–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–µ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –ø–æ–ø—Ä–æ—Å–∏ —É –ê–Ω–∏. –í–∏–¥–µ–æ–∑–∞–ø–∏—Å—å –ø—Ä–æ—á—Ç–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —á–∞—Ç PandaBanda. –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ —á–ª–µ–Ω—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –∂—é—Ä–∏ –ø—Ä–∏—Å—É–¥—è—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤, —Å–æ–æ—Ç–≤–µ—Å—Ç–≤—É—é—â–µ–µ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ—á—Ç–µ–Ω–∏—è"},
	{Category: "–¢–µ–Ω", Difficulty: "Hard", Text: "–í–Ω–∏–º–∞–Ω–∏–µ! –í–Ω–∏–º–∞–Ω–∏–µ! –û–±—ä—è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω–∫—É—Ä—Å —á—Ç–µ—Ü–æ–≤ –∏–º–µ–Ω–∏ –ê—Ç–∞—Ç—é—Ä–∫–∞! \n\n–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∞–ª–ª—ã, —Ç–µ–±–µ –Ω—É–∂–Ω–æ —Å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –ø–æ—ç—Ç–∞. –†–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–µ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ –ø–æ–ø—Ä–æ—Å–∏ —É –ê–Ω–∏. –í–∏–¥–µ–æ–∑–∞–ø–∏—Å—å –ø—Ä–æ—á—Ç–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —á–∞—Ç PandaBanda. –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ —á–ª–µ–Ω—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –∂—é—Ä–∏ –ø—Ä–∏—Å—É–¥—è—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤, —Å–æ–æ—Ç–≤–µ—Å—Ç–≤—É—é—â–µ–µ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ—á—Ç–µ–Ω–∏—è"},
	{Category: "–†–∞—Å–∏–º", Difficulty: "Easy", Text: "–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 100 –±–∞–ª–ª–æ–≤ –∏ –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å –æ—Ç –†–∞—Å–∏–º–∞, –æ—Ç–≤–µ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã:\n\n1) –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –∞–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–∞—è –æ–∫—Ä–æ—à–∫–∞ –æ—Ç —Ä—É—Å—Å–∫–æ–π?\n\n2) –ß—Ç–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –Ω–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–µ, –∑–∞–≥–æ—Ä–∞—è –Ω–∞ –∑–∞–∫–∞—Ç–µ –Ω–∞ –ø–ª—è–∂–µ –®–∏—Ö–æ–≤–∞ –ø–æ–¥ –ë–∞–∫—É?\n\n–°–≤–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ —Å –ê–Ω–µ–π. –ë–æ–Ω—É—Å: –†–∞—Å–∏–º –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç –ª—é–±–æ–µ –±–ª—é–¥–æ –∏–∑ –µ–≥–æ –∞—Ä—Å–µ–Ω–∞–ª–∞ –ø–æ —Ç–≤–æ–µ–º—É –∑–∞–ø—Ä–æ—Å—É."},
	{Category: "–†–∞—Å–∏–º", Difficulty: "Medium", Text: "–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 300 –±–∞–ª–ª–æ–≤ –∏ –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å –æ—Ç –†–∞—Å–∏–º–∞, –æ—Ç–≤–µ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã:\n\n1) –ö–∞–∫ —Å–µ–π—á–∞—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –¢–µ–ª–µ–≥—Ä–∞—Ñ–Ω–∞—è —É–ª–∏—Ü–∞ –≤ –ë–∞–∫—É?\n\n2) –í –∫–∞–∫–æ–º –º—É–∑–µ–µ –ø–æ–¥ –Ω–µ–±–æ–º —Å –Ω–∞—Å–∫–∞–ª—å–Ω—ã–º–∏ —Ä–∏—Å—É–Ω–∫–∞–º–∏ –ø–µ—Ä–≤–æ–±—ã—Ç–Ω—ã—Ö –ª—é–¥–µ–π –º—ã –ø–∏–ª–∏ –ø–∏–≤–æ –≤ —è–Ω–≤–∞—Ä–µ 2022?\n\n–°–≤–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ —Å –ê–Ω–µ–π. –ë–æ–Ω—É—Å: –†–∞—Å–∏–º –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç –ª—é–±–æ–µ –±–ª—é–¥–æ –∏–∑ –µ–≥–æ –∞—Ä—Å–µ–Ω–∞–ª–∞ –ø–æ —Ç–≤–æ–µ–º—É –∑–∞–ø—Ä–æ—Å—É."},
	{Category: "–†–∞—Å–∏–º", Difficulty: "Hard", Text: "–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 500 –±–∞–ª–ª–æ–≤ –∏ –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å –æ—Ç –†–∞—Å–∏–º–∞, –æ—Ç–≤–µ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã:\n\n1) –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Ä—É—Å—Å–∫–∞—è –≤–æ–¥–∫–∞ –æ—Ç –∞–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–æ–π?\n\n2) –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –æ–±—ä—è–≤–∏–ª–∏ —à—Ç–æ—Ä–º–æ–≤–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –Ω–∞ –ø–ª—è–∂–µ?\n\n–°–≤–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ —Å –ê–Ω–µ–π. –ë–æ–Ω—É—Å: –†–∞—Å–∏–º –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç –ª—é–±–æ–µ –±–ª—é–¥–æ –∏–∑ –µ–≥–æ –∞—Ä—Å–µ–Ω–∞–ª–∞ –ø–æ —Ç–≤–æ–µ–º—É –∑–∞–ø—Ä–æ—Å—É."},
	{Category: "–õ—ë–Ω—è –î–∏–Ω–∞–º–æ", Difficulty: "Easy", Text: "–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –≤–æ–æ–±—Ä–∞–∂–∞–µ–º—ã–µ 100 –±–∞–ª–ª–æ–≤, —Ç–µ–±–µ –Ω–∞–¥–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –≤ –≤–∏–¥–µ–æ–∫—Ä—É–∂–æ—á–∫–µ –õ—ë–Ω–µ:\n\n–í –∫–∞–∫–æ–º –º–∞—Ç—á–µ –°–∏–ª—å–≤–µ—Å—Ç—Ä –°–ª–∞–π –ò–≥–±—É–Ω –∑–∞–±–∏–ª –¥—É–±–ª—å –∑–∞ –º–æ—Å–∫–æ–≤—Å–∫–æ–µ –î–∏–Ω–∞–º–æ?"},
	{Category: "–õ—ë–Ω—è –î–∏–Ω–∞–º–æ", Difficulty: "Medium", Text: "–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –≤–æ–æ–±—Ä–∞–∂–∞–µ–º—ã–µ 100 –±–∞–ª–ª–æ–≤, —Ç–µ–±–µ –Ω–∞–¥–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –≤ –≤–∏–¥–µ–æ–∫—Ä—É–∂–æ—á–∫–µ –õ—ë–Ω–µ:\n\n–í –∫–∞–∫–æ–º –≥–æ–¥—É –¢–æ—á–∏–ª–∏–Ω –∑–∞–±–∏–ª –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –≥–æ–ª –ê–ª–∞–Ω–∏–∏"},
	{Category: "–õ—ë–Ω—è –î–∏–Ω–∞–º–æ", Difficulty: "Hard", Text: "", VideoNote: "./assets/leny_hard.mp4"},
	{Category: "–ö—Å—é—à–∞ –∏ –ì–æ—à–∞", Difficulty: "Easy", Text: "–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 100 –±–∞–ª–ª–æ–≤, –æ–ø—Ä–µ–¥–µ–ª–∏, –Ω–∞ –∫–∞–∫–æ–π –∏–∑ —Ç—Ä—ë—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∑–∞–ø–µ—á–∞—Ç–ª—ë–Ω –±–µ–ª—ã–π –≥—Ä–∏–±. –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤—å –≤ —á–∞—Ç –ö—É–±–∫–∞ –≥—Ä–∞–Ω-–ø—Ä–∏ –ø–æ –†—É–º–º–∏–∫—É–±—É", Photos: []string{"./assets/grib1.jpg", "./assets/grib2.jpg", "./assets/grib3.jpg"}},
	{Category: "–ö—Å—é—à–∞ –∏ –ì–æ—à–∞", Difficulty: "Medium", Text: "–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 300 –±–∞–ª–ª–æ–≤, –ø–æ—Å—á–∏—Ç–∞–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∏—à–µ–∫ –≤ –∏–≥—Ä–µ –†—É–º–º–∏–∫—É–±. –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤—å –≤ —á–∞—Ç –ö—É–±–∫–∞ –≥—Ä–∞–Ω-–ø—Ä–∏ –ø–æ –†—É–º–º–∏–∫—É–±—É"},
	{Category: "–ö—Å—é—à–∞ –∏ –ì–æ—à–∞", Difficulty: "Hard", Text: "–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 500 –±–∞–ª–ª–æ–≤, –Ω–∞—Ä–∏—Å—É–π –ª–æ–≥–æ—Ç–∏–ø –¥–ª—è –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ö–æ—Ç—è—Ç –∏–¥—Ç–∏ –≤ –≥–æ—Ä—ã, –Ω–æ –∏–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —ç—Ç–æ –¥–µ–ª–∞—Ç—å. –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤—å –≤ —á–∞—Ç –ö—É–±–∫–∞ –≥—Ä–∞–Ω-–ø—Ä–∏ –ø–æ –†—É–º–º–∏–∫—É–±—É"},
	{Category: "–ö–∞—Ç—è –∏ –°–∞—à–∞", Difficulty: "Easy", Text: "–í—ã–ø–æ–ª–Ω–∏ –∑–∞–¥–∞–Ω–∏–µ –ö–∞—Ç–∏ –∏ –°–∞—à–∏, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 100 –±–∞–ª–ª–æ–≤!", VideoNote: "./assets/katy_sasha.mp4", Photos: []string{"./assets/katy1.jpg", "./assets/katy2.jpg", "./assets/katy3.jpg", "./assets/katy4.jpg", "./assets/katy5.jpg", "./assets/katy6.jpg", "./assets/katy7.jpg"}},
	{Category: "–ö–∞—Ç—è –∏ –°–∞—à–∞", Difficulty: "Medium", Text: "–í—ã–ø–æ–ª–Ω–∏ –∑–∞–¥–∞–Ω–∏–µ –ö–∞—Ç–∏ –∏ –°–∞—à–∏, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 300 –±–∞–ª–ª–æ–≤!", VideoNote: "./assets/katy_sasha.mp4", Photos: []string{"./assets/katy1.jpg", "./assets/katy2.jpg", "./assets/katy3.jpg", "./assets/katy4.jpg", "./assets/katy5.jpg", "./assets/katy6.jpg", "./assets/katy7.jpg"}},
	{Category: "–ö–∞—Ç—è –∏ –°–∞—à–∞", Difficulty: "Hard", Text: "–í—ã–ø–æ–ª–Ω–∏ –∑–∞–¥–∞–Ω–∏–µ –ö–∞—Ç–∏ –∏ –°–∞—à–∏, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 500 –±–∞–ª–ª–æ–≤!", VideoNote: "./assets/katy_sasha.mp4", Photos: []string{"./assets/katy1.jpg", "./assets/katy2.jpg", "./assets/katy3.jpg", "./assets/katy4.jpg", "./assets/katy5.jpg", "./assets/katy6.jpg", "./assets/katy7.jpg"}},
	{Category: "–ú–∞—à–∞ –∏ –ê–Ω–¥—Ä–µ–π", Difficulty: "Easy", Text: "–í—ã–ø–æ–ª–Ω–∏ –∑–∞–¥–∞–Ω–∏–µ –æ—Ç –ú–∞—à–∏ –∏ –ê–Ω–¥—Ä–µ—è –∏ –ø–æ–ª—É—á–∏ 100 –±–∞–ª–ª–æ–≤! –í–∏–¥–µ–æ–æ—Ç—á—ë—Ç –æ—Ç–ø—Ä–∞–≤—å –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –ú–∞—à–µ.", VideoNote: "./assets/masha1.mp4"},
	{Category: "–ú–∞—à–∞ –∏ –ê–Ω–¥—Ä–µ–π", Difficulty: "Medium", Text: "–í—ã–ø–æ–ª–Ω–∏ –∑–∞–¥–∞–Ω–∏–µ –æ—Ç –ú–∞—à–∏ –∏ –ê–Ω–¥—Ä–µ—è –∏ –ø–æ–ª—É—á–∏ 300 –±–∞–ª–ª–æ–≤! –í–∏–¥–µ–æ–æ—Ç—á—ë—Ç –æ—Ç–ø—Ä–∞–≤—å –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –ú–∞—à–µ.", VideoNote: "./assets/masha2.mp4"},
	{Category: "–ú–∞—à–∞ –∏ –ê–Ω–¥—Ä–µ–π", Difficulty: "Hard", Text: "–í—ã–ø–æ–ª–Ω–∏ –∑–∞–¥–∞–Ω–∏–µ –æ—Ç –ú–∞—à–∏ –∏ –ê–Ω–¥—Ä–µ—è –∏ –ø–æ–ª—É—á–∏ 500 –±–∞–ª–ª–æ–≤! –í–∏–¥–µ–æ–æ—Ç—á—ë—Ç –æ—Ç–ø—Ä–∞–≤—å –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –ú–∞—à–µ.", VideoNote: "./assets/masha3.mp4"},
	{Category: "–û–ª–µ–≥ –ï–≥–æ—Ä–æ–≤", Difficulty: "Easy", Text: "–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 100 –±–∞–ª–ª–æ–≤, –∑–∞–ø–æ–ª–Ω–∏ —Å–æ—á–∏–Ω–µ–Ω–∏–µ \"–ú–æ–π –¥—Ä—É–≥ –û–ª–µ–≥\" –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–º–∏ —Å–ª–æ–≤–∞–º–∏. –í —Ç–≤–æ—ë–º —Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–∏ –±—É–¥–µ—Ç –≤—ã–±–æ—Ä —Å–ª–æ–≤ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏. –†–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–µ —Å–æ—á–∏–Ω–µ–Ω–∏–µ –ø–æ–ø—Ä–æ—Å–∏ —É –ê–Ω–∏."},
	{Category: "–û–ª–µ–≥ –ï–≥–æ—Ä–æ–≤", Difficulty: "Medium", Text: "–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 300 –±–∞–ª–ª–æ–≤, –∑–∞–ø–æ–ª–Ω–∏ —Å–æ—á–∏–Ω–µ–Ω–∏–µ \"–ú–æ–π –¥—Ä—É–≥ –û–ª–µ–≥\" –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–º–∏ —Å–ª–æ–≤–∞–º–∏. –í —Ç–≤–æ—ë–º —Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–∏ –±—É–¥–µ—Ç –≤—ã–±–æ—Ä —Å–ª–æ–≤ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏. –†–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–µ —Å–æ—á–∏–Ω–µ–Ω–∏–µ –ø–æ–ø—Ä–æ—Å–∏ —É –ê–Ω–∏."},
	{Category: "–û–ª–µ–≥ –ï–≥–æ—Ä–æ–≤", Difficulty: "Hard", Text: "–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 500 –±–∞–ª–ª–æ–≤, –∑–∞–ø–æ–ª–Ω–∏ —Å–æ—á–∏–Ω–µ–Ω–∏–µ \"–ú–æ–π –¥—Ä—É–≥ –û–ª–µ–≥\" –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–º–∏ —Å–ª–æ–≤–∞–º–∏. –í —Ç–≤–æ—ë–º —Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–∏ –±—É–¥–µ—Ç –≤—ã–±–æ—Ä —Å–ª–æ–≤ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏. –†–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω–æ–µ —Å–æ—á–∏–Ω–µ–Ω–∏–µ –ø–æ–ø—Ä–æ—Å–∏ —É –ê–Ω–∏."},
	{Category: "–ñ–µ–Ω—è –∏ –ú–∏—à–∞", Difficulty: "Easy", Text: "–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 100 –±–∞–ª–ª–æ–≤, —Ä–∞–∑–≥–∞–¥–∞–π –∫—Ä–æ—Å—Å–≤–æ—Ä–¥ –Ω–∞ –∑–∞–∫–∞–¥—ã—á–Ω—É—é —Ç–µ–º—É –æ—Ç –ñ–µ–Ω–∏ –∏ –ú–∏—à–∏. –†–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–π –∫—Ä–æ—Å—Å–≤–æ—Ä–¥ –ø–æ–ø—Ä–æ—Å–∏ —É –ê–Ω–∏."},
	{Category: "–ñ–µ–Ω—è –∏ –ú–∏—à–∞", Difficulty: "Medium", Text: "–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 300 –±–∞–ª–ª–æ–≤, —Ä–∞–∑–≥–∞–¥–∞–π –∫—Ä–æ—Å—Å–≤–æ—Ä–¥ –Ω–∞ –∑–∞–∫–∞–¥—ã—á–Ω—É—é —Ç–µ–º—É –æ—Ç –ñ–µ–Ω–∏ –∏ –ú–∏—à–∏. –†–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–π –∫—Ä–æ—Å—Å–≤–æ—Ä–¥ –ø–æ–ø—Ä–æ—Å–∏ —É –ê–Ω–∏."},
	{Category: "–ñ–µ–Ω—è –∏ –ú–∏—à–∞", Difficulty: "Hard", Text: "–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 500 –±–∞–ª–ª–æ–≤, —Ä–∞–∑–≥–∞–¥–∞–π –∫—Ä–æ—Å—Å–≤–æ—Ä–¥ –Ω–∞ –∑–∞–∫–∞–¥—ã—á–Ω—É—é —Ç–µ–º—É –æ—Ç –ñ–µ–Ω–∏ –∏ –ú–∏—à–∏. –†–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–π –∫—Ä–æ—Å—Å–≤–æ—Ä–¥ –ø–æ–ø—Ä–æ—Å–∏ —É –ê–Ω–∏."},
	{Category: "–ú–∞–∫—Å –ú–∏—à–∏–Ω", Difficulty: "Easy", Text: "–£—Ä–∞! 100 –±–∞–ª–ª–æ–≤ –¥–æ—Å—Ç–∞—é—Ç—Å—è —Ç–µ–±–µ –≤ –ø–æ–¥–∞—Ä–æ–∫ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫! "},
	{Category: "–ú–∞–∫—Å –ú–∏—à–∏–Ω", Difficulty: "Medium", Text: "–£—Ä–∞! 300 –±–∞–ª–ª–æ–≤ –¥–æ—Å—Ç–∞—é—Ç—Å—è —Ç–µ–±–µ –≤ –ø–æ–¥–∞—Ä–æ–∫ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫! "},
	{Category: "–ú–∞–∫—Å –ú–∏—à–∏–Ω", Difficulty: "Hard", Text: "–£—Ä–∞! 500 –±–∞–ª–ª–æ–≤ –¥–æ—Å—Ç–∞—é—Ç—Å—è —Ç–µ–±–µ –≤ –ø–æ–¥–∞—Ä–æ–∫ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫! "},
	{Category: "–ê–Ω—è", Difficulty: "Easy", Text: "–†—É–±—Ä–∏–∫–∞ –û—Ä—Ñ–µ–π: —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 100 –±–∞–ª–ª–æ–≤, –Ω–∞–∑–æ–≤–∏ –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä–æ–≤ 3 –º–µ–ª–æ–¥–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –≤–∫–ª—é—á–∏—Ç –ê–Ω—è. "},
	{Category: "–ê–Ω—è", Difficulty: "Medium", Text: "–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 300 –±–∞–ª–ª–æ–≤, –æ–±—ã–≥—Ä–∞–π –ê–Ω—é –≤ –Ω–∞—Ä–¥—ã."},
	{Category: "–ê–Ω—è", Difficulty: "Hard", Text: "–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 500 –±–∞–ª–ª–æ–≤, –≤–º–µ—Å—Ç–µ —Å –ê–Ω–µ–π —Å–ª–µ–ø–∏ –∏–∑ –ø–ª–∞—Å—Ç–∏–ª–∏–Ω–∞ —Ñ–∏–≥—É—Ä–∫—É –∫–∞–∫ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ. –ö–∞—Ä—Ç–∏–Ω–∫—É –∏ –ø–ª–∞—Å—Ç–∏–ª–∏–Ω –≤–æ–∑—å–º–∏ —É –ê–Ω–∏."},
}

var categories = []struct {
	Name   string
	Unique string
}{
	{Name: "–ö–∏–ö–∏", Unique: "category_kiki"},
	{Name: "–°—Ç–∏–∫–∏", Unique: "category_stiki"},
	{Name: "–¢–µ–Ω", Unique: "category_ten"},
	{Name: "–†–∞—Å–∏–º", Unique: "category_rasim"},
	{Name: "–û–ª–µ–≥ –ï–≥–æ—Ä–æ–≤", Unique: "category_egorov"},
	{Name: "–ú–∞–∫—Å –ú–∏—à–∏–Ω", Unique: "category_mishin"},
	{Name: "–ñ–µ–Ω—è –∏ –ú–∏—à–∞", Unique: "category_evg"},
	{Name: "–õ—ë–Ω—è –î–∏–Ω–∞–º–æ", Unique: "category_dinamo"},
	{Name: "–ú–∞—à–∞ –∏ –ê–Ω–¥—Ä–µ–π", Unique: "category_masha"},
	{Name: "–ö–∞—Ç—è –∏ –°–∞—à–∞", Unique: "category_shodina"},
	{Name: "–ö—Å—é—à–∞ –∏ –ì–æ—à–∞", Unique: "category_gosha"},
	{Name: "–ê–Ω—è", Unique: "category_anna"},
}

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
type UserProgress struct {
	UserID    int64
	Completed map[string]bool // –ò—Å–ø–æ–ª—å–∑—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞–Ω–∏—è –∫–∞–∫ –∫–ª—é—á
}

var userProgressMap = make(map[int64]*UserProgress)

func Run(ctx context.Context, conf *config.Config, l logger.Logger) {
	l.Info("starting app")

	// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞
	pref := telebot.Settings{
		Token:  conf.Telegram.Token,
		Poller: &telebot.LongPoller{Timeout: 10 * time.Second},
	}

	b, err := telebot.NewBot(pref)
	if err != nil {
		log.Fatal(err)
		return
	}

	b.Handle(telebot.OnText, func(c telebot.Context) error {
		logIncomingMessage(c, l)
		return nil
	})

	b.Handle(&telebot.InlineButton{Unique: "all_categories"}, func(c telebot.Context) error {
		// –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –∫–∞–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
		var buttons [][]telebot.InlineButton
		for i := 0; i < len(categories); i += 3 {
			var row []telebot.InlineButton
			for j := i; j < i+3 && j < len(categories); j++ {
				row = append(row, telebot.InlineButton{
					Text:   categories[j].Name,
					Unique: categories[j].Unique,
				})
			}
			buttons = append(buttons, row)
		}

		return c.Send("–í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:", &telebot.ReplyMarkup{
			InlineKeyboard: buttons,
		})
	})

	// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
	b.Handle("/start", func(c telebot.Context) error {
		// –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
		var buttons [][]telebot.InlineButton
		for i := 0; i < len(categories); i += 3 {
			var row []telebot.InlineButton
			for j := i; j < i+3 && j < len(categories); j++ {
				row = append(row, telebot.InlineButton{
					Text:   categories[j].Name,
					Unique: categories[j].Unique,
				})
			}
			buttons = append(buttons, row)
		}

		return c.Send("*–ü—Ä–∏–≤–µ—Ç, –û–ª–µ–≥*!\n\n–° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è! \n\n–í —ç—Ç–æ—Ç –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å –º—ã –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–ª–∏ –¥–ª—è —Ç–µ–±—è –ø–æ–¥–∞—Ä–æ—á–∫–∏, –Ω–æ —á—Ç–æ–±—ã –∏—Ö –ø–æ–ª—É—á–∏—Ç—å, –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Å—ã–≥—Ä–∞—Ç—å –≤ –∏–≥—Ä—É! –° –∫–∞–∂–¥–æ–π –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–π 1000 –±–∞–ª–ª–æ–≤ —Ç–µ–±–µ –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –ø–æ–¥–∞—Ä–æ–∫ üòâ\n\n–ó–∞–¥–∞–Ω–∏—è —Ç—ã –º–æ–∂–µ—à—å –≤—ã–±–∏—Ä–∞—Ç—å –≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –¥–Ω—è. –ü–æ–¥—Å—á—ë—Ç –±–∞–ª–ª–æ–≤ –±—É–¥–µ—Ç –≤–µ—Å—Ç–∏ –∏—Å–∫—É—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –ê–Ω—è, –ø–æ—ç—Ç–æ–º—É –¥–µ—Ä–∂–∏ –µ—ë –≤ –∫—É—Ä—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π. –ü–æ –≤—Å–µ–º –¥—Ä—É–≥–∏–º –≤–æ–ø—Ä–æ—Å–∞–º —Ç–µ–±–µ —Ç–æ–∂–µ –ø–æ–º–æ–∂–µ—Ç –ê–Ω—è ü§ì\n\n–£ —Ç–µ–±—è –µ—Å—Ç—å 3 –≤–æ–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –∑–æ–ª–æ—Ç—ã–µ –º–æ–Ω–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–º–∏ —Ç—ã –º–æ–∂–µ—à—å –æ—Ç–∫—É–ø–∏—Ç—å—Å—è –æ—Ç –∑–∞–¥–∞–Ω–∏—è, –µ—Å–ª–∏ –æ–Ω–æ —Ç–µ–±–µ –Ω–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å. –ü–æ—Ç—Ä–∞—Ç–∏–≤ –∑–æ–ª–æ—Ç—É—é –º–æ–Ω–µ—Ç—É, —Ç—ã –æ—Ç–∫–∞–∂–µ—à—å—Å—è –æ—Ç –∑–∞–¥–∞–Ω–∏—è, –Ω–æ –¥–æ–ª–∂–µ–Ω –±—É–¥–µ—à—å –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤ —ç—Ç–æ–π –∂–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.\n\n–£–¥–∞—á–∏! –í –∫–æ–Ω—Ü–µ —á–µ–ª–ª–µ–Ω–¥–∂–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Ç–µ–±–µ —Å–æ–∑–≤–æ–Ω–∏—Ç—å—Å—è, —á—Ç–æ–±—ã —Ç—ã —Ä–∞—Å—Å–∫–∞–∑–∞–ª –Ω–∞–º, –∫–∞–∫ —Å–∏–ª—å–Ω–æ —Ç–µ–±–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å! üíô", &telebot.ReplyMarkup{
			InlineKeyboard: buttons,
		}, telebot.ModeMarkdown)
	})

	// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
	for _, category := range categories {
		cat := category
		b.Handle(&telebot.InlineButton{Unique: cat.Unique}, func(c telebot.Context) error {
			return chooseDifficulty(c, cat.Unique, cat.Name)
		})
	}

	// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π
	for _, category := range categories {
		cat := category
		for _, level := range []string{"Easy", "Medium", "Hard"} {
			lev := level
			difficultyUnique := "difficulty_" + lev + "_" + cat.Unique
			b.Handle(&telebot.InlineButton{Unique: difficultyUnique}, func(c telebot.Context) error {
				return sendQuestion(c, cat.Name, lev)
			})
		}
	}

	// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
	b.Handle(telebot.OnCallback, func(c telebot.Context) error {
		return c.Send("–ö–∞–∫–æ–π –±–æ–ª—å—à–æ–π –º–æ–ª–æ–¥–µ—Ü! –ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ. –ü—Ä–æ–¥–æ–ª–∂–∞–π!")
	})

	b.Start()
}

// –í—ã–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
func chooseDifficulty(c telebot.Context, category, name string) error {
	difficultyMessage := "–¢—ã –≤—ã–±—Ä–∞–ª –∫–∞—Ç–µ–≥–æ—Ä–∏—é *" + name + "*. –¢–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏ —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:"
	return c.Send(difficultyMessage, generateDifficultyMarkup(category), telebot.ModeMarkdown)
}

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π
func generateDifficultyMarkup(category string) *telebot.ReplyMarkup {
	return &telebot.ReplyMarkup{
		InlineKeyboard: [][]telebot.InlineButton{
			{
				{Text: "100", Unique: "difficulty_Easy_" + category},
				{Text: "300", Unique: "difficulty_Medium_" + category},
				{Text: "500", Unique: "difficulty_Hard_" + category},
			},
		},
	}
}

// –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–∞
func sendQuestion(c telebot.Context, category, difficulty string) error {
	for _, q := range questions {
		if q.Category == category && q.Difficulty == difficulty {
			// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –≤–æ–ø—Ä–æ—Å–∞
			questionID := fmt.Sprintf("%s_%s", category, difficulty)
			// –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
			userID := c.Sender().ID
			if _, exists := userProgressMap[userID]; !exists {
				userProgressMap[userID] = &UserProgress{
					UserID:    userID,
					Completed: make(map[string]bool), // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞–∫ –ø—É—Å—Ç—É—é –∫–∞—Ä—Ç—É
				}
			}

			// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤–æ–ø—Ä–æ—Å —Å –∫–Ω–æ–ø–∫–æ–π "–ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ"
			replyMarkup := telebot.ReplyMarkup{
				InlineKeyboard: [][]telebot.InlineButton{
					{
						{Text: "–ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ", Unique: questionID}, // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
						{Text: "–ö –¥—Ä—É–≥–∏–º –∑–∞–¥–∞–Ω–∏—è–º", Unique: "all_categories"},
					},
				},
			}

			if q.VideoNote != "" {
				videoNote := &telebot.VideoNote{File: telebot.FromDisk(q.VideoNote)}
				c.Send(videoNote, &replyMarkup)
			}

			if len(q.Photos) > 0 {
				album := telebot.Album{}
				for _, photo := range q.Photos {
					album = append(album, &telebot.Photo{File: telebot.FromDisk(photo)})
				}
				c.SendAlbum(album, &replyMarkup)
			}
			if q.Text != "" {
				return c.Send("*–ó–∞–¥–∞–Ω–∏–µ:* "+q.Text, telebot.ModeMarkdown, &replyMarkup)
			}
		}
	}
	return nil
}

func logIncomingMessage(c telebot.Context, l logger.Logger) {
	user := c.Sender()
	message := c.Text()

	// –õ–æ–≥–∏—Ä—É–µ–º ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏–º—è –∏ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
	l.Info("–ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:", user.ID, "-", user.FirstName, user.LastName, ":", message)
}
